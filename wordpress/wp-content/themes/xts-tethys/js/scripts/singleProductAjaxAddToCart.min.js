!function(s){XTSThemeModule.singleProductAjaxAddToCart=function(){"no"!==xts_settings.single_product_ajax_add_to_cart&&XTSThemeModule.$body.on("submit","form.cart",function(t){t.preventDefault();var d,t=s(this),n=t.parents(".product");n.hasClass("product-type-external")||n.hasClass("product-type-zakeke")||(d=t.find(".single_add_to_cart_button"),t=t.serialize(),t+="&action=xts_single_product_ajax_add_to_cart",d.val()&&(t+="&add-to-cart="+d.val()),d.removeClass("added xts-not-added").addClass("loading"),s(document.body).trigger("adding_to_cart",[d,t]),s.ajax({url:xts_settings.ajaxurl,data:t,method:"POST",success:function(t){var a,e,o,r;t&&(t.error&&t.product_url?window.location=t.product_url:"yes"===xts_settings.cart_redirect_after_add?window.location=xts_settings.action_after_add_to_cart_cart_url:(d.removeClass("loading"),a=t.fragments,e=t.cart_hash,a&&s.each(a,function(t){s(t).addClass("xts-updating")}),a&&s.each(a,function(t,a){s(t).replaceWith(a)}),n.hasClass("xts-product")&&t.notices_raw.error?(o=t.notices_raw.error,r="",s.each(o,function(){var t=this.notice;r+=(t=t.substring(t.indexOf("</a>"),t.lastIndexOf(""))+"<br>",(new DOMParser).parseFromString(t,"text/html").documentElement.textContent)}),alert(r),n.find(".add_to_cart_button").removeClass("loading")):0<t.notices.indexOf("error")?(s(".woocommerce-notices-wrapper").append(t.notices),d.addClass("xts-not-added")):("widget"===xts_settings.action_after_add_to_cart&&s.magnificPopup.close(),s(document.body).trigger("added_to_cart",[a,e,d]))))},error:function(){console.log("ajax adding to cart error")}}))})},s(document).ready(function(){XTSThemeModule.singleProductAjaxAddToCart()})}(jQuery);