!function(s){XTSThemeModule.productsCompare=function(){if("undefined"!=typeof Cookies){var t="xts_compare_list";xts_settings.is_multisite&&(t+="_"+xts_settings.current_blog_id);var e=XTSThemeModule.$body,o=s(".xts-header-el.xts-header-compare, .xts-navbar-compare"),t=Cookies.get(t);if(0<o.length)if(void 0!==t)try{var a=JSON.parse(t);o.find(".xts-compare-count, .xts-navbar-count").text(a.length)}catch(t){console.log("cant parse cookies json")}else o.find(".xts-compare-count, .xts-navbar-count").text(0);e.on("click",".xts-compare-btn a",function(t){var e=s(this),o=e.data("id"),a=e.data("added-text");if(e.hasClass("xts-added"))return!0;t.preventDefault(),e.addClass("xts-loading"),s.ajax({url:xts_settings.ajaxurl,data:{action:"xts_add_to_compare",id:o},dataType:"json",method:"GET",success:function(t){XTSThemeModule.$document.trigger("xtsAddedToCompare"),t.table?n(t):console.log("something wrong loading compare data ",t)},error:function(){console.log("We cant add to compare. Something wrong with AJAX response. Probably some PHP conflict.")},complete:function(){e.removeClass("xts-loading").addClass("xts-added"),(0<e.find("span").length?e.find("span"):e).text(a),XTSThemeModule.$document.trigger("xtsUpdateTooltip",e.parent())}})}),e.on("click",".xts-compare-remove a",function(t){t.preventDefault();var e=s(this),t=e.data("id");e.addClass("xts-loading"),s.ajax({url:xts_settings.ajaxurl,data:{action:"xts_remove_from_compare",id:t},dataType:"json",method:"GET",success:function(t){t.table?n(t):console.log("something wrong loading compare data ",t)},error:function(){console.log("We cant remove product compare. Something wrong with AJAX response. Probably some PHP conflict.")},complete:function(){e.addClass("xts-loading")}})})}function n(t){0<o.length&&o.find(".xts-compare-count, .xts-navbar-count").text(t.count);var e=s(".xts-compare-table");0<e.length&&e.replaceWith(t.table)}},s(document).ready(function(){XTSThemeModule.productsCompare()})}(jQuery);